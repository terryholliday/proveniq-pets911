Command failed: npx jest
PASS __tests__/moderator-gating.test.ts
PASS __tests__/county-pack-cache.test.ts
FAIL __tests__/offline-queue.test.ts
  â— Offline Queue â€º Cleanup â€º cleanupSyncedActions should remove old synced actions

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

    [0m [90m 181 |[39m       [36mconst[39m cleaned [33m=[39m [36mawait[39m cleanupSyncedActions([35m0[39m)[33m;[39m [90m// 0 days = cleanup all[39m
     [90m 182 |[39m       
    [31m[1m>[22m[39m[90m 183 |[39m       expect(cleaned)[33m.[39mtoBe([35m1[39m)[33m;[39m
     [90m     |[39m                       [31m[1m^[22m[39m
     [90m 184 |[39m       
     [90m 185 |[39m       [36mconst[39m stats [33m=[39m [36mawait[39m getQueueStats()[33m;[39m
     [90m 186 |[39m       expect(stats[33m.[39msynced)[33m.[39mtoBe([35m0[39m)[33m;[39m[0m

      at __tests__/offline-queue.test.ts:183:23
      at fulfilled (__tests__/offline-queue.test.ts:5:58)

FAIL __tests__/crisis-readiness.test.ts
  â— Console

    console.log
      STRESS_LOG: Processed 100 actions in 54ms

      at __tests__/crisis-readiness.test.ts:53:21

    console.log
      PRIVACY_AUDIT: Detected PII in payload (Permissible for v1 Rescue, must be encrypted in v2)

      at __tests__/crisis-readiness.test.ts:107:21

  â— Pet 911 Crisis Readiness (CRTS) â€º Section 4: Engine Determinism (Safety Invariants) â€º counselor-engine must return deterministic clinical templates for high-risk markers

    expect(received).toContain(expected) // indexOf

    Expected substring: "emergency"
    Received string:    "I hear you, and I want you to know **your life has value**. I can't keep you safe by myself, but I can help you reach people who can.Â·
    ðŸ“ž **988** â€” call or text now
    ðŸ“ž **Veterinary Social Work Helpline: 865-755-8839**Â·
    If you feel like you might act on this, call **911** immediately.Â·
    Are you alone right now?"

    [0m [90m 117 |[39m             expect(analysis[33m.[39mrequiresEscalation)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 118 |[39m             [90m// Hard check against the template - any deviation is a "Fail-Loud" event[39m
    [31m[1m>[22m[39m[90m 119 |[39m             expect(response)[33m.[39mtoContain([32m"emergency"[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 120 |[39m             expect(response)[33m.[39mtoContain([32m"988"[39m)[33m;[39m
     [90m 121 |[39m         })[33m;[39m
     [90m 122 |[39m[0m

      at Object.<anonymous> (__tests__/crisis-readiness.test.ts:119:30)

FAIL __tests__/counselor-engine.test.ts
  â— Death/Grief Detection â€º Traumatic Death â€º should detect traumatic death: "He was murdered by a neighbor..."

    expect(received).toBe(expected) // Object.is equality

    Expected: "death_traumatic"
    Received: "general"

    [0m [90m 333 |[39m         [36mconst[39m result [33m=[39m generateCompanionResponse(phrase)[33m;[39m
     [90m 334 |[39m         
    [31m[1m>[22m[39m[90m 335 |[39m         expect(result[33m.[39manalysis[33m.[39mcategory)[33m.[39mtoBe([32m'death_traumatic'[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 336 |[39m         
     [90m 337 |[39m         [90m// Must provide trauma-informed response[39m
     [90m 338 |[39m         expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'deeply sorry'[39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:335:42)

  â— Death/Grief Detection â€º Euthanasia â€º should detect euthanasia: "We had to put our dog down yesterday..."

    expect(received).toBe(expected) // Object.is equality

    Expected: "death_euthanasia"
    Received: "general"

    [0m [90m 358 |[39m         [36mconst[39m result [33m=[39m generateCompanionResponse(phrase)[33m;[39m
     [90m 359 |[39m         
    [31m[1m>[22m[39m[90m 360 |[39m         expect(result[33m.[39manalysis[33m.[39mcategory)[33m.[39mtoBe([32m'death_euthanasia'[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 361 |[39m         
     [90m 362 |[39m         [90m// Must validate the decision[39m
     [90m 363 |[39m         expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'hardest things'[39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:360:42)

  â— Death/Grief Detection â€º Euthanasia â€º should detect euthanasia: "We had to put my cat to sleep last week..."

    expect(received).toBe(expected) // Object.is equality

    Expected: "death_euthanasia"
    Received: "general"

    [0m [90m 358 |[39m         [36mconst[39m result [33m=[39m generateCompanionResponse(phrase)[33m;[39m
     [90m 359 |[39m         
    [31m[1m>[22m[39m[90m 360 |[39m         expect(result[33m.[39manalysis[33m.[39mcategory)[33m.[39mtoBe([32m'death_euthanasia'[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 361 |[39m         
     [90m 362 |[39m         [90m// Must validate the decision[39m
     [90m 363 |[39m         expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'hardest things'[39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:360:42)

  â— Disenfranchised Grief / Radical Validation â€º should provide radical validation: "I know it's silly to be this upset over ..."

    expect(received).toContain(expected) // indexOf

    Expected substring: "biology"
    Received string:    "let me stop you right there: **they were not 'just' anything.** your pet was a family member. a source of daily comfort. their inability to understand says nothing about the validity of your grief.Â·
    your brain is processing a major loss. give yourself permission to grieve fully. i'm here to witness that grief, because it matters."

    [0m [90m 503 |[39m       expect(result[33m.[39mresponse)[33m.[39mtoContain([32m"NOT 'just'"[39m)[33m;[39m
     [90m 504 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'family member'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 505 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'biology'[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 506 |[39m     })[33m;[39m
     [90m 507 |[39m   })[33m;[39m
     [90m 508 |[39m   [0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:505:45)

  â— Disenfranchised Grief / Radical Validation â€º should provide radical validation: "People think I'm crazy for grieving this..."

    expect(received).toContain(expected) // indexOf

    Expected substring: "biology"
    Received string:    "let me stop you right there: **they were not 'just' anything.** your pet was a family member. a source of daily comfort. their inability to understand says nothing about the validity of your grief.Â·
    your brain is processing a major loss. give yourself permission to grieve fully. i'm here to witness that grief, because it matters."

    [0m [90m 503 |[39m       expect(result[33m.[39mresponse)[33m.[39mtoContain([32m"NOT 'just'"[39m)[33m;[39m
     [90m 504 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'family member'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 505 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'biology'[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 506 |[39m     })[33m;[39m
     [90m 507 |[39m   })[33m;[39m
     [90m 508 |[39m   [0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:505:45)

  â— Disenfranchised Grief / Radical Validation â€º should provide radical validation: "My boss says I shouldn't be this upset, ..."

    expect(received).toContain(expected) // indexOf

    Expected substring: "biology"
    Received string:    "let me stop you right there: **they were not 'just' anything.** your pet was a family member. a source of daily comfort. their inability to understand says nothing about the validity of your grief.Â·
    your brain is processing a major loss. give yourself permission to grieve fully. i'm here to witness that grief, because it matters."

    [0m [90m 503 |[39m       expect(result[33m.[39mresponse)[33m.[39mtoContain([32m"NOT 'just'"[39m)[33m;[39m
     [90m 504 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'family member'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 505 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'biology'[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 506 |[39m     })[33m;[39m
     [90m 507 |[39m   })[33m;[39m
     [90m 508 |[39m   [0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:505:45)

  â— Disenfranchised Grief / Radical Validation â€º should provide radical validation: "Everyone tells me to just get another pe..."

    expect(received).toContain(expected) // indexOf

    Expected substring: "biology"
    Received string:    "let me stop you right there: **they were not 'just' anything.** your pet was a family member. a source of daily comfort. their inability to understand says nothing about the validity of your grief.Â·
    your brain is processing a major loss. give yourself permission to grieve fully. i'm here to witness that grief, because it matters."

    [0m [90m 503 |[39m       expect(result[33m.[39mresponse)[33m.[39mtoContain([32m"NOT 'just'"[39m)[33m;[39m
     [90m 504 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'family member'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 505 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'biology'[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 506 |[39m     })[33m;[39m
     [90m 507 |[39m   })[33m;[39m
     [90m 508 |[39m   [0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:505:45)

  â— Disenfranchised Grief / Radical Validation â€º should provide radical validation: "I feel stupid for crying over an animal..."

    expect(received).toBe(expected) // Object.is equality

    Expected: "disenfranchised"
    Received: "general"

    [0m [90m 498 |[39m       [36mconst[39m result [33m=[39m generateCompanionResponse(phrase)[33m;[39m
     [90m 499 |[39m       
    [31m[1m>[22m[39m[90m 500 |[39m       expect(result[33m.[39manalysis[33m.[39mcategory)[33m.[39mtoBe([32m'disenfranchised'[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 501 |[39m       
     [90m 502 |[39m       [90m// Must counter the minimization[39m
     [90m 503 |[39m       expect(result[33m.[39mresponse)[33m.[39mtoContain([32m"NOT 'just'"[39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:500:40)

  â— Disenfranchised Grief / Radical Validation â€º should address societal minimization directly

    expect(received).toContain(expected) // indexOf

    Expected substring: "people who say"
    Received string:    "let me stop you right there: **they were not 'just' anything.** your pet was a family member. a source of daily comfort. their inability to understand says nothing about the validity of your grief.Â·
    your brain is processing a major loss. give yourself permission to grieve fully. i'm here to witness that grief, because it matters."

    [0m [90m 510 |[39m     [36mconst[39m result [33m=[39m generateCompanionResponse([32m"People say it's just a pet"[39m)[33m;[39m
     [90m 511 |[39m     
    [31m[1m>[22m[39m[90m 512 |[39m     expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m"people who say"[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 513 |[39m     expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m"never loved like you do"[39m)[33m;[39m
     [90m 514 |[39m   })[33m;[39m
     [90m 515 |[39m })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:512:43)

  â— Anticipatory Grief â€º should detect anticipatory grief: "I'm going to lose my dog slowly and it's..."

    expect(received).toBe(expected) // Object.is equality

    Expected: "anticipatory"
    Received: "general"

    [0m [90m 565 |[39m       [36mconst[39m result [33m=[39m generateCompanionResponse(phrase)[33m;[39m
     [90m 566 |[39m       
    [31m[1m>[22m[39m[90m 567 |[39m       expect(result[33m.[39manalysis[33m.[39mcategory)[33m.[39mtoBe([32m'anticipatory'[39m)[33m;[39m
     [90m     |[39m                                        [31m[1m^[22m[39m
     [90m 568 |[39m       
     [90m 569 |[39m       [90m// Must contain anticipatory grief language[39m
     [90m 570 |[39m       expect(result[33m.[39mresponse)[33m.[39mtoContain([32m'Anticipatory Grief'[39m)[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:567:40)

  â— Anticipatory Grief â€º should require â‰¥2 markers for detection

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 581 |[39m     
     [90m 582 |[39m     expect(singleResult[33m.[39mdetected)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 583 |[39m     expect(doubleResult[33m.[39mdetected)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 584 |[39m   })[33m;[39m
     [90m 585 |[39m })[33m;[39m
     [90m 586 |[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:583:35)

  â— Quality of Life / Euthanasia Decision Support â€º should include the key question

    expect(received).toContain(expected) // indexOf

    Expected substring: "keeping them alive for THEM, or for me"
    Received string:    "This is one of the hardest questions a pet parent faces. **The Quality of Life Scale (HHHHHMM)** can help you assess objectively:
    â€¢ **Hurt** - Is pain managed?
    â€¢ **Hunger/Hydration** - Are they eating/drinking?
    â€¢ **Hygiene** - Can they keep clean?
    â€¢ **Happiness** - Do they have moments of joy?
    â€¢ **Mobility** - Can they move as they want to?
    â€¢ **More good days than bad?**Â·
    If you're asking this, it often means your heart already knows. Would it help to talk through what you're seeing?"

    [0m [90m 689 |[39m     [36mconst[39m result [33m=[39m generateCompanionResponse([32m"When is it time?"[39m)[33m;[39m
     [90m 690 |[39m     
    [31m[1m>[22m[39m[90m 691 |[39m     expect(result[33m.[39mresponse)[33m.[39mtoContain([32m'keeping them alive for THEM, or for me'[39m)[33m;[39m
     [90m     |[39m                             [31m[1m^[22m[39m
     [90m 692 |[39m   })[33m;[39m
     [90m 693 |[39m })[33m;[39m
     [90m 694 |[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:691:29)

  â— Lost Pet / Ambiguous Loss â€º should provide lost pet guidance: "My dog ran away yesterday..."

    expect(received).toContain(expected) // indexOf

    Expected substring: "can't predict"
    Received string:    "i'm so sorry you're going through this. the panic and fear you're feeling right now shows how much you love them. we *can* focus on the steps that give you the best chance of getting them home:Â·
    **right now (next 30â€“60 minutes):**
    â€¢ re-check the last-seen area slowly (quiet voice, treat bag).
    â€¢ ask a neighbor to help cover more ground.
    â€¢ if safe, leave a familiar-smelling item (blanket/shirt) near the exit point.Â·
    **next:**
    â€¢ call **local shelters/animal control** and ask them to scan for a **microchip**.
    â€¢ post clear photos, but **do not share your home address** publicly."

    [0m [90m 712 |[39m       
     [90m 713 |[39m       [90m// Must contain actionable, uncertainty-safe guidance[39m
    [31m[1m>[22m[39m[90m 714 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m"can't predict"[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 715 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'microchip'[39m)[33m;[39m
     [90m 716 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'do not share your home address'[39m)[33m;[39m
     [90m 717 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:714:45)

  â— Lost Pet / Ambiguous Loss â€º should provide lost pet guidance: "My cat has been missing for three days..."

    expect(received).toContain(expected) // indexOf

    Expected substring: "can't predict"
    Received string:    "i'm so sorry you're going through this. the panic and fear you're feeling right now shows how much you love them. we *can* focus on the steps that give you the best chance of getting them home:Â·
    **right now (next 30â€“60 minutes):**
    â€¢ re-check the last-seen area slowly (quiet voice, treat bag).
    â€¢ ask a neighbor to help cover more ground.
    â€¢ if safe, leave a familiar-smelling item (blanket/shirt) near the exit point.Â·
    **next:**
    â€¢ call **local shelters/animal control** and ask them to scan for a **microchip**.
    â€¢ post clear photos, but **do not share your home address** publicly."

    [0m [90m 712 |[39m       
     [90m 713 |[39m       [90m// Must contain actionable, uncertainty-safe guidance[39m
    [31m[1m>[22m[39m[90m 714 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m"can't predict"[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 715 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'microchip'[39m)[33m;[39m
     [90m 716 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'do not share your home address'[39m)[33m;[39m
     [90m 717 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:714:45)

  â— Lost Pet / Ambiguous Loss â€º should provide lost pet guidance: "I can't find my dog anywhere..."

    expect(received).toContain(expected) // indexOf

    Expected substring: "can't predict"
    Received string:    "i'm so sorry you're going through this. the panic and fear you're feeling right now shows how much you love them. we *can* focus on the steps that give you the best chance of getting them home:Â·
    **right now (next 30â€“60 minutes):**
    â€¢ re-check the last-seen area slowly (quiet voice, treat bag).
    â€¢ ask a neighbor to help cover more ground.
    â€¢ if safe, leave a familiar-smelling item (blanket/shirt) near the exit point.Â·
    **next:**
    â€¢ call **local shelters/animal control** and ask them to scan for a **microchip**.
    â€¢ post clear photos, but **do not share your home address** publicly."

    [0m [90m 712 |[39m       
     [90m 713 |[39m       [90m// Must contain actionable, uncertainty-safe guidance[39m
    [31m[1m>[22m[39m[90m 714 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m"can't predict"[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 715 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'microchip'[39m)[33m;[39m
     [90m 716 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'do not share your home address'[39m)[33m;[39m
     [90m 717 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:714:45)

  â— Lost Pet / Ambiguous Loss â€º should provide lost pet guidance: "She escaped from the yard..."

    expect(received).toContain(expected) // indexOf

    Expected substring: "can't predict"
    Received string:    "i'm so sorry you're going through this. the panic and fear you're feeling right now shows how much you love them. we *can* focus on the steps that give you the best chance of getting them home:Â·
    **right now (next 30â€“60 minutes):**
    â€¢ re-check the last-seen area slowly (quiet voice, treat bag).
    â€¢ ask a neighbor to help cover more ground.
    â€¢ if safe, leave a familiar-smelling item (blanket/shirt) near the exit point.Â·
    **next:**
    â€¢ call **local shelters/animal control** and ask them to scan for a **microchip**.
    â€¢ post clear photos, but **do not share your home address** publicly."

    [0m [90m 712 |[39m       
     [90m 713 |[39m       [90m// Must contain actionable, uncertainty-safe guidance[39m
    [31m[1m>[22m[39m[90m 714 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m"can't predict"[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 715 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'microchip'[39m)[33m;[39m
     [90m 716 |[39m       expect(result[33m.[39mresponse[33m.[39mtoLowerCase())[33m.[39mtoContain([32m'do not share your home address'[39m)[33m;[39m
     [90m 717 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:714:45)

  â— Response Template Validation â€º Template: suicide_active â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: suicide_passive â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: mdd â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: paralysis â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: neurodivergent â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: dv_immediate_danger â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: dv_coercive_control â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: child_abuse â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: emergency_veterinary â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: emergency â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: death_traumatic â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: death_euthanasia â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: death_general â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: death_found_deceased â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: anticipatory â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: scam_alert â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: scam â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: lost_pet â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: found_pet â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: guilt_cbt â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: disenfranchised â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: pediatric â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: quality_of_life â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

  â— Response Template Validation â€º Template: behavioral_euthanasia â€º should have mustContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 877 |[39m     describe([32m`Template: ${category}`[39m[33m,[39m () [33m=>[39m {
     [90m 878 |[39m       it([32m'should have mustContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 879 |[39m         expect(template[33m.[39mmustContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                      [31m[1m^[22m[39m
     [90m 880 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 881 |[39m       })[33m;[39m
     [90m 882 |[39m       [0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:879:38)

  â— Response Template Validation â€º Template: behavioral_euthanasia â€º should have mustNotContain requirements defined

    expect(received).toBeDefined()

    Received: undefined

    [0m [90m 882 |[39m       
     [90m 883 |[39m       it([32m'should have mustNotContain requirements defined'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 884 |[39m         expect(template[33m.[39mmustNotContain)[33m.[39mtoBeDefined()[33m;[39m
     [90m     |[39m                                         [31m[1m^[22m[39m
     [90m 885 |[39m         expect([33mArray[39m[33m.[39misArray(template[33m.[39mmustNotContain))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m 886 |[39m       })[33m;[39m
     [90m 887 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (__tests__/counselor-engine.test.ts:884:41)

Test Suites: 3 failed, 2 passed, 5 total
Tests:       43 failed, 212 passed, 255 total
Snapshots:   0 total
Time:        3.539 s
Ran all test suites.
